  general:
    artifacts:
      - ./app/build/outputs/apk/

  machine:
    environment:
      ANDROID_HOME: /Users/imanbilal/Library/Android/sdk
      #ANDROID_HOME: /usr/local/android/sdk

  dependencies:

    pre:
      - chmod +x ./scripts/environmentSetup.sh
      - ./scripts/environmentSetup.sh

    cache_directories:
      - ~/.android
      - ~/android


  test:

    override:

      # start the emulator
      - emulator -avd circleci-android22 -no-audio -no-window:
          background: true
          parallel: true

    #- ./gradlew connectedAndroidTest:
    #    timeout: 360

      # wait for it to have booted
      - circle-android wait-for-boot

